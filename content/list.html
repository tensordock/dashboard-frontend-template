<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Manage Servers - H100cloud.com</title>
        <link
            rel="preconnect" href="https://fonts.gstatic.com">
        <link
            href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700%7cPoppins:300,400,500,600,700,800,900&amp;display=swap"
            rel="stylesheet">
        <link rel="stylesheet" href="static/css/theme.bundle.css" />
        <link rel="stylesheet" href="./static/css/custom.css" />
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    </head>
    <body>
        <main>
            <div class="container" data-layout="container">
                <nav
                    class="navbar navbar-light navbar-vertical navbar-expand-xl">
                    <script>
                    var navbarStyle = localStorage.getItem("navbarStyle");
                    if (navbarStyle && navbarStyle !== 'transparent') {
                        document.querySelector('.navbar-vertical').classList.add(`navbar-${navbarStyle}`);
                    }
                </script>
                    <div class="d-flex align-items-center">
                        <a class="navbar-brand" href="/home">
                            <div class="d-flex align-items-center py-3">
                                <span
                                    class="font-sans-serif text-primary">H100cloud</span>
                            </div>
                        </a>
                    </div>
                    <div class="collapse navbar-collapse"
                        id="navbarVerticalCollapse">
                        <div class="navbar-vertical-content scrollbar">
                            <ul class="navbar-nav flex-column mb-3"
                                id="navbarVerticalNav">
                                <li class="nav-item">
                                    <a class="nav-link" href="/home"
                                        role="button">
                                        <div
                                            class="d-flex align-items-center"><span
                                                class="nav-link-icon"><svg
                                                    class="svg-inline--fa fa-globe fa-w-16"
                                                    aria-hidden="true"
                                                    focusable="false"
                                                    data-prefix="fas"
                                                    data-icon="globe" role="img"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    viewBox="0 0 496 512"
                                                    data-fa-i2svg><path
                                                        fill="currentColor"
                                                        d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"></path></svg><!-- <span class="fas fa-globe"></span> Font Awesome fontawesome.com --></span>
                                            Home
                                        </div>
                                    </a>
                                    <a class="nav-link" href="/deploy"
                                        role="button">
                                        <div class="d-flex align-items-center">
                                            <span class="nav-link-icon">
                                                <svg
                                                    class="svg-inline--fa fa-rocket fa-w-16"
                                                    aria-hidden="true"
                                                    focusable="false"
                                                    data-prefix="fas"
                                                    data-icon="rocket"
                                                    role="img"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    viewBox="0 0 512 512"
                                                    data-fa-i2svg>
                                                    <path fill="currentColor"
                                                        d="M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z">
                                                    </path>
                                                </svg>
                                            </span>Deploy a new H100
                                        </div>
                                    </a>
                                    <a class="nav-link" href="/list"
                                        role="button">
                                        <div
                                            class="d-flex align-items-center"><span
                                                class="nav-link-icon"><svg
                                                    class="svg-inline--fa fa-window-restore fa-w-16"
                                                    aria-hidden="true"
                                                    focusable="false"
                                                    data-prefix="far"
                                                    data-icon="window-restore"
                                                    role="img"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    viewBox="0 0 512 512"
                                                    data-fa-i2svg><path
                                                        fill="currentColor"
                                                        d="M464 0H144c-26.5 0-48 21.5-48 48v48H48c-26.5 0-48 21.5-48 48v320c0 26.5 21.5 48 48 48h320c26.5 0 48-21.5 48-48v-48h48c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-96 464H48V256h320v208zm96-96h-48V144c0-26.5-21.5-48-48-48H144V48h320v320z"></path></svg><!-- <span class="far fa-window-restore"></span> Font Awesome fontawesome.com --></span>
                                            Virtual machines
                                        </div>
                                    </a>
                                    <a class="nav-link" href="/account"
                                        role="button">
                                        <div
                                            class="d-flex align-items-center"><span
                                                class="nav-link-icon"><svg
                                                    class="svg-inline--fa fa-user fa-w-14"
                                                    aria-hidden="true"
                                                    focusable="false"
                                                    data-prefix="fas"
                                                    data-icon="user" role="img"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    viewBox="0 0 448 512"
                                                    data-fa-i2svg><path
                                                        fill="currentColor"
                                                        d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"></path></svg><!-- <span class="fas fa-user"></span> Font Awesome fontawesome.com --></span>
                                            Account
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
                <div class="content">
                    <nav
                        class="navbar navbar-light navbar-glass navbar-top navbar-expand">
                        <a class="navbar-brand me-1 me-sm-3" href="/">
                            <div class="d-flex align-items-center">
                                <span
                                    class="font-sans-serif text-primary">GPUfleet</span>
                            </div>
                        </a>
                        <ul
                            class="navbar-nav navbar-nav-icons ms-auto flex-row align-items-center">
                            <li class="nav-item dropdown">
                                <a
                                    class="nav-link pe-0 ps-2"
                                    id="navbarDropdownUser"
                                    role="button"
                                    data-toggle="dropdown"
                                    aria-haspopup="true"
                                    aria-expanded="true">
                                    <svg
                                        class="svg-inline--fa fa-user-circle fa-w-16 text-900 fs-6"
                                        aria-hidden="true" focusable="false"
                                        data-prefix="far"
                                        data-icon="user-circle" role="img"
                                        xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 496 512"
                                        data-fa-i2svg><path fill="currentColor"
                                            d="M248 104c-53 0-96 43-96 96s43 96 96 96 96-43 96-96-43-96-96-96zm0 144c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm0-240C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-49.7 0-95.1-18.3-130.1-48.4 14.9-23 40.4-38.6 69.6-39.5 20.8 6.4 40.6 9.6 60.5 9.6s39.7-3.1 60.5-9.6c29.2 1 54.7 16.5 69.6 39.5-35 30.1-80.4 48.4-130.1 48.4zm162.7-84.1c-24.4-31.4-62.1-51.9-105.1-51.9-10.2 0-26 9.6-57.6 9.6-31.5 0-47.4-9.6-57.6-9.6-42.9 0-80.6 20.5-105.1 51.9C61.9 339.2 48 299.2 48 256c0-110.3 89.7-200 200-200s200 89.7 200 200c0 43.2-13.9 83.2-37.3 115.9z"></path></svg>
                                </a>
                                <div
                                    class="dropdown-menu dropdown-caret dropdown-menu-end py-0"
                                    aria-labelledby="navbarDropdownUser"
                                    data-popper="static">
                                    <div
                                        class="bg-white dark__bg-1000 rounded-2 py-2">
                                        <a class="dropdown-item"
                                            href="/account">Account</a>
                                        <a class="dropdown-item" href="#"
                                            onclick="document.cookie='whitelabelToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;'; window.location.href='/home'">Logout</a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </nav>
                    <div class="card z-1" id="recentPurchaseTable"
                        data-list="{&quot;valueNames&quot;:[&quot;name&quot;,&quot;email&quot;,&quot;product&quot;,&quot;payment&quot;,&quot;amount&quot;],&quot;page&quot;:7,&quot;pagination&quot;:true}">
                        <div class="card-header">
                            <div class="row flex-between-center">
                                <div
                                    class="col-6 col-sm-auto d-flex align-items-center pe-0">
                                    <h5
                                        class="fs-9 mb-0 text-nowrap py-2 py-xl-0">Your
                                        Virtual Machines</h5>
                                </div>
                                <div
                                    class="col-6 col-sm-auto ms-auto text-end ps-0">
                                    <div class="d-none"
                                        id="table-purchases-actions">
                                        <div class="d-flex">
                                            <select
                                                class="form-select form-select-sm"
                                                aria-label="Bulk actions">
                                                <option selected>Bulk
                                                    actions</option>
                                                <option
                                                    value="Refund">Refund</option>
                                                <option
                                                    value="Delete">Delete</option>
                                                <option
                                                    value="Archive">Archive</option>
                                            </select>
                                            <button
                                                class="btn btn-falcon-default btn-sm ms-2"
                                                type="button">Apply</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body px-0 py-0">
                            <div class="table-responsive scrollbar">
                                <table
                                    class="table table-sm fs-10 mb-0 overflow-hidden">
                                    <thead class="bg-200">
                                        <tr>
                                            <th class="white-space-nowrap">
                                                <div
                                                    class="mb-0 d-flex align-items-center">
                                                    <input
                                                        class="form-check-input"
                                                        id="checkbox-bulk-purchases-select"
                                                        type="checkbox"
                                                        data-bulk-select="{&quot;body&quot;:&quot;table-purchase-body&quot;,&quot;actions&quot;:&quot;table-purchases-actions&quot;,&quot;replacedElement&quot;:&quot;table-purchases-replace-element&quot;}">
                                                </div>
                                            </th>
                                            <th
                                                class="text-900 sort pe-1 align-middle white-space-nowrap">Name</th>
                                            <th
                                                class="text-900 sort pe-1 align-middle white-space-nowrap">Specs</th>
                                            <th
                                                class="no-sort pe-1 align-middle data-table-row-action"></th>
                                        </tr>
                                    </thead>
                                    <tbody class="list" id="serverList"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <script>
        const baseUrl = 'http://127.0.0.1:5000';

        const whitelabelToken = document.cookie
            .split('; ')
            .find(row => row.startsWith('whitelabelToken='))
            ?.split('=')[1];

        document.addEventListener("DOMContentLoaded", async () => {
            let loggedIn = false;
            const userInfo = { email: '', orgName: '' };

            if (whitelabelToken) {
                try {
                    const response = await fetch(`${baseUrl}/api/v0/client/whitelabel/token_verify`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': whitelabelToken,
                        },
                    });

                    if (response.ok) {
                        const tokenVerifyResponse = await response.json();
                        loggedIn = true;

                        userInfo.email = tokenVerifyResponse.email;
                        userInfo.orgName = tokenVerifyResponse.org_name;
                    }
                } catch (error) {
                    window.location.href = './login';
                }
            }
        });

        const serverList = document.getElementById('serverList');

        async function retrieveServers() {
            const apiRoute = `${baseUrl}/api/v0/client/list`;

            const request = await fetch(apiRoute, {
                method: "POST",
                credentials: "include",
                headers: {
                    'Authorization': whitelabelToken,
                },
            });

            const response = await request.json();

            if (response.success && Object.keys(response.virtualmachines).length) populateServers(response.virtualmachines);
            else serverList.innerHTML = '<tr><td colspan="4"><div class="d-flex w-100 justify-content-center p-3">No virtual machines found.</div></td></tr>';
        }

        function populateServers(data) {
            let htmlContent = '';

            Object.entries(data).forEach(([machineId, vm]) => {
                const isRunning = ['Running', 'Active'].includes(vm.status);
                const vmStatusClass = isRunning ? 'success' : 'danger';
                const vmStatusIcon = `<i class="fe fe-circle text-${vmStatusClass}"></i>`;

                const isWindows = vm.operating_system?.toLowerCase().includes('windows');

                const sshPort = Object.entries(vm.port_forwards).find(([, internalPort]) => internalPort === '22')[0];
                const accessInstruction = isWindows ? `hostname:${sshPort}` : `ssh -p ${sshPort} user@${vm.ip_address}`;

                let gpuDisplay = '';
                const statusDisplay = () => {
                    if (vm.status === 'StoppedDisassociated') return 'Stopped with Resources Disassociated';
                    return vm.status;
                }

                if (vm.specs.gpu.type && vm.specs.gpu.amount > 0) {
                    const gpuType = vm.specs.gpu.type.replace(/geforce/g, "GeForce ")
                        .replace(/gtx/g, "GTX ")
                        .replace(/ti/g, " Ti")
                        .replace(/ada/g, "ADA ")
                        .replace(/a/g, "A")
                        .replace(/rtx/g, "RTX ")
                        .replace(/super/g, " Super")
                        .replace(/lhr/g, " LHR")
                        .replace(/-sxm4-/g, " SXM4 ")
                        .replace(/-pcie-/g, " ")
                        .replace(/p/g, "P")
                        .replace(/tesla/g, "Tesla ")
                        .replace(/quadro/g, "Quadro ")
                        .replace(/v/g, "V")
                        .replace(/gb/g, " GB");

                    gpuDisplay = `${vm.specs.gpu.amount}x ${gpuType}, `;
                }

                htmlContent += `
                <tr class="btn-reveal-trigger">
                    <td class="align-middle" style="width: 28px;">
                        <small class="badge badge-sm badge-rounded-circle bg-${vmStatusClass}">
                            ${vmStatusIcon}
                        </small>
                    </td>
                    <th class="align-middle white-space-nowrap name">${vm.name}</th>
                    <td class="align-middle white-space-nowrap email">
                        <small class="text-gray-500">
                            ${vm.city}, ${vm.state}, ${vm.country}: ${gpuDisplay}
                            ${vm.specs.vcpus} vCPUs,
                            ${vm.specs.ram} GB RAM,
                            ${vm.specs.storage} GB Storage,
                            $${vm.total_price}/hour
                        </small>
                    </td>
                    <td class="align-middle white-space-nowrap text-end">
                        <div class="dropstart font-sans-serif position-static d-inline-block">
                            <button class="btn btn-falcon-default btn-sm me-1 mb-2 mb-sm-0" type="button" data-toggle="collapse" data-target="#collapseInfo${machineId}" aria-expanded="false" aria-controls="collapseInfo${machineId}"><svg class="svg-inline--fa fa-ellipsis-h fa-w-16 fs-11" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="ellipsis-h" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"></path></svg><!-- <span class="fas fa-ellipsis-h fs-11"></span> Font Awesome fontawesome.com --></button>
                        </div>
                    </td>
                </tr>
                <tr style="padding: 0!important; margin:0!important">
                    <td colspan="4" style="padding: 0!important; margin:0!important">
                        <div class="collapse bg-body-tertiary" id="collapseInfo${machineId}">
                            <div class="p-3 row">
                                <div class="col-lg col-xxl-5">
                                  <h6 class="fw-semi-bold ls mb-3 text-uppercase">VM Specs</h6>
                                  <div class="row">
                                    <div class="col-5 col-sm-4">
                                      <p class="fw-semi-bold mb-1">ID</p>
                                    </div>
                                    <div class="col">${vm.hostname}</div>
                                  </div>
                                  <div class="row">
                                    <div class="col-5 col-sm-4">
                                      <p class="fw-semi-bold mb-1">Created</p>
                                    </div>
                                    <div class="col">${vm.timestamp_creation}</div>
                                  </div>
                                  <div class="row">
                                    <div class="col-5 col-sm-4">
                                      <p class="fw-semi-bold mb-1">GPUs</p>
                                    </div>
                                    <div class="col">${vm.specs.gpu.type} (${vm.specs.gpu.amount})</div>
                                  </div>
                                  <div class="row">
                                    <div class="col-5 col-sm-4">
                                      <p class="fw-semi-bold mb-1">RAM</p>
                                    </div>
                                    <div class="col">
                                      <p class="mb-1">${vm.specs.ram} GB</p>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="col-5 col-sm-4">
                                      <p class="fw-semi-bold mb-0">Storage</p>
                                    </div>
                                    <div class="col">
                                      <p class="mb-0">${vm.specs.storage} GB</p>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="col-5 col-sm-4">
                                      <p class="fw-semi-bold mb-1">vCPUs</p>
                                    </div>
                                    <div class="col">${vm.specs.vcpus}</div>
                                  </div>
                                  <div class="row">
                                    <div class="col-5 col-sm-4">
                                      <p class="fw-semi-bold mb-1">Port forwards</p>
                                    </div>
                                    <div class="col">
                                        <ul class="list-unstyled">
                                            ${Object.entries(vm.port_forwards).map(([key, value]) => `<li>${key} to ${value}</li>`).join('')}
                                        </ul>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="col-5 col-sm-4">
                                      <p class="fw-semi-bold mb-1">Connection details</p>
                                    </div>
                                    <div class="col">${accessInstruction}</div>
                                  </div>
                                </div>
                                <div class="col-lg col-xxl-5 mt-4 mt-lg-0 offset-xxl-1">
                                  <h6 class="fw-semi-bold ls mb-3 text-uppercase">Billing Information</h6>
                                  <div class="row">
                                    <div class="col-5 col-sm-4">
                                      <p class="fw-semi-bold mb-1">Storage price</p>
                                    </div>
                                    <div class="col">${vm.storage_price}</div>
                                  </div>
                                  <div class="row">
                                    <div class="col-5 col-sm-4">
                                      <p class="fw-semi-bold mb-1">Compute price</p>
                                    </div>
                                    <div class="col">
                                      <p class="mb-1">${vm.compute_price}</p>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="col-5 col-sm-4">
                                      <p class="fw-semi-bold mb-1">Total price</p>
                                    </div>
                                    <div class="col">${vm.total_price}</div>
                                  </div>
                                  <div class="row">
                                    <div class="col-5 col-sm-4">
                                      <p class="fw-semi-bold mb-1">Status</p>
                                    </div>
                                    <div class="col">${statusDisplay()}</div>
                                  </div>
                                </div>
                              </div>
                              <div class="d-flex justify-content-between">
                                 <button
                                    type="button"
                                    class="d-flex align-items-center justify-content-center btn m-3 btn-sm w-100 btn-falcon-default ${vm.status.toLowerCase().includes('stopped') && 'd-none'}"
                                    onclick="stopVM('${machineId}', false)"
                                    id="stopReserveVM-${machineId}"
                                 >
                                    Stop VM & reserve GPU
                                 </button>
                                 <button
                                    type="button"
                                    class="d-flex align-items-center justify-content-center btn m-3 btn-sm w-100 btn-falcon-default ${vm.status.toLowerCase().includes('stopped') && 'd-none'}"
                                    onclick="stopVM('${machineId}', true)"
                                    id="stopReleaseVM-${machineId}"
                                 >
                                    Stop VM & release GPU
                                 </button>
                                 <button
                                    type="button"
                                    class="d-flex align-items-center justify-content-center btn m-3 btn-sm w-100 btn-falcon-default ${vm.status.toLowerCase() === 'running' && 'd-none'}"
                                    onclick="startVM('${machineId}')"
                                    id="startVM-${machineId}"
                                 >
                                    Start VM
                                 </button>
                                 <button
                                    type="button"
                                    class="d-flex align-items-center justify-content-center btn m-3 btn-sm w-100 btn-falcon-default"
                                    onclick="deleteVM('${machineId}')"
                                    id="deleteVM-${machineId}"
                                 >
                                    Delete Virtual Machine
                                 </button>
                              </div>
                        </div>
                    </td>
                </tr>
                `;
            });

            serverList.innerHTML = htmlContent;
        }

        const stopVM = async (machineId, releaseGPU) => {
            const stopType = releaseGPU ? 'stopReleaseVM' : 'stopReserveVM';
            const buttonElement = document.getElementById(`${stopType}-${machineId}`);

            buttonElement.innerHTML = `
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="margin-right: 7px"></span>
            <span>Stopping...</span>
            `;
            buttonElement.disabled = true;

            const apiRoute = `${baseUrl}/api/v0/client/stop/single`;
            const formData = new FormData();

            formData.append("server", machineId);
            formData.append("disassociate_resources", releaseGPU);

            const response = await fetch(apiRoute, {
                method: "POST",
                body: formData,
                credentials: "include",
                headers: {
                    'Authorization': whitelabelToken,
                },
            });

            if (response.ok){
                window.location.reload();
            } else {
                buttonElement.disabled = false;
            }
        }

        const startVM = async (machineId) => {
            const buttonElement = document.getElementById(`startVM-${machineId}`);

            buttonElement.innerHTML = `
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="margin-right: 7px"></span>
            <span>Starting...</span>
            `;
            buttonElement.disabled = true;

            const apiRoute = `${baseUrl}/api/v0/client/start/single`;
            const formData = new FormData();

            formData.append("server", machineId);

            const response = await fetch(apiRoute, {
                method: "POST",
                body: formData,
                credentials: "include",
                headers: {
                    'Authorization': whitelabelToken,
                },
            });

            if (response.ok) {
                window.location.reload();
            } else {
                console.log("response success: ", response.success);
                buttonElement.disabled = false;
            }
        }

        const deleteVM = async (machineId) => {
            const buttonElement = document.getElementById(`deleteVM-${machineId}`);
            
            buttonElement.innerHTML = `
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="margin-right: 7px"></span>
            <span>Deleting...</span>
            `;
            buttonElement.disabled = true;

            const apiRoute = `${baseUrl}/api/v0/client/delete/single`;
            const formData = new FormData();

            formData.append("server", machineId);

            const response = await fetch(apiRoute, {
                method: "POST",
                body: formData,
                credentials: "include",
                headers: {
                    'Authorization': whitelabelToken,
                },
            });

            if (response.ok){
                console.log("Success!");
                window.location.reload()
            } else {
                console.log("response success: ", response.success);
                buttonElement.disabled = false;
            }
        }

        retrieveServers();
    </script>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js"
            integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
            crossorigin="anonymous"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"
            integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
            crossorigin="anonymous"></script>
        <script src="./static/js/theme.js"></script>
    </body>
</html>